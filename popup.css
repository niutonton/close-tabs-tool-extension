.festive-element {
    position: fixed;
    top: -50px; /* Start above the screen */
    pointer-events: none; /* Make them unclickable */
    animation: fall linear;
    z-index: 9999;
}

#new-year-greeting {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 9998;
    opacity: 1; /* Make the container visible */
    animation: greetingFadeOut 1.5s ease-in-out 1.5s forwards; /* Fade out after 1.5s */
}

#new-year-greeting span {
    position: relative; /* Needed for pseudo-element positioning */
    display: inline-block;
    font-size: 60px;
    font-weight: bold;
    color: #FFD700; /* Gold color */
    text-shadow: 2px 2px 5px #c0392b; /* Red shadow */
    opacity: 0;
    transform: scale(0);
    animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
}

/* Particle effect */
#new-year-greeting span::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle, #ffd700, #ff6b6b, transparent, transparent);
    border-radius: 50%;
    opacity: 0;
    transform: translate(-50%, -50%) scale(0);
    animation: burst 0.6s ease-out forwards;
    z-index: -1; /* Place particles behind the character */
}

/* Staggered animation delay for each character */
#new-year-greeting span:nth-child(1) { animation-delay: 0.2s; }
#new-year-greeting span:nth-child(1)::before { animation-delay: 0.2s; }
#new-year-greeting span:nth-child(2) { animation-delay: 0.4s; }
#new-year-greeting span:nth-child(2)::before { animation-delay: 0.4s; }
#new-year-greeting span:nth-child(3) { animation-delay: 0.6s; }
#new-year-greeting span:nth-child(3)::before { animation-delay: 0.6s; }
#new-year-greeting span:nth-child(4) { animation-delay: 0.8s; }
#new-year-greeting span:nth-child(4)::before { animation-delay: 0.8s; }

body::before {
    content: '';
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: radial-gradient(circle, rgba(200, 50, 50, 0.3), rgba(200, 50, 50, 0) 70%);
    pointer-events: none;
    z-index: -1; /* Place it behind all content */
    opacity: 0;
    animation: pulseBg 5s ease-in-out forwards;
}

@keyframes fall {
    to {
        transform: translateY(110vh); /* Fall to below the screen */
    }
}

@keyframes popIn {
    0% {
        opacity: 0;
        transform: scale(0);
    }
    70% {
        opacity: 1;
        transform: scale(1.2);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes burst {
    0% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(0);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(1.5);
    }
}

@keyframes greetingFadeOut {
    to {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
    }
}

@keyframes pulseBg {
    0% { opacity: 0; }
    20% { opacity: 0.7; }
    80% { opacity: 0.7; }
    100% { opacity: 0; }
}

body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            width: 750px; /* Changed for side-by-side view */
            margin: 0;
            color: #202124;
            position: relative; /* Needed for z-index on pseudo-element */
            background-color: transparent; /* Allow pseudo-element to be visible */
        }
        #header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
        }

        #festive-horse-icon {
            width: 36px;
            height: 36px;
            background-image: url('horse剪纸.png');
            background-repeat: no-repeat;
            background-size: contain;
            background-position: center;
            margin: 0 12px;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        #tab-count {
            font-size: 13px;
            font-weight: 500;
            margin-right: 15px;
            white-space: nowrap;
        }

        #tabs-container {
            display: flex;
            overflow-x: auto;
            height: 400px; /* Fixed height for the container */
            padding-bottom: 10px; /* Space for horizontal scrollbar */
        }

        .search-container {
            position: relative;
        }

        .search-container::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23e74c3c'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L8 12v1c0 .55.45 1 1 1h1v2c0 .55.45 1 1 1s1-.45 1-1v-2h1c.55 0 1-.45 1-1v-1l1.79-1.79c.13.58.21 1.17.21 1.79 0 4.08-3.05 7.44-7 7.93zM10 10V8c0-.55.45-1 1-1s1 .45 1 1v2h-2zm-4.79-5.79c.58-.13 1.17-.21 1.79-.21 2.76 0 5.26 1.12 7.07 2.93L12.92 8H11c-1.1 0-2 .9-2 2v1.08L4.21 4.21z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-size: contain;
            pointer-events: none; /* Make sure it doesn't block clicks on the input */
        }

        #search-box {
            width: 250px;
            padding: 6px 6px 6px 30px; /* Increased left padding for the icon */
            box-sizing: border-box; /* Ensures padding doesn't affect width */
            border: 1px solid #ddd; /* Lighter border for a softer look */
            border-radius: 4px;
            background-color: #fafafa; /* Very light grey background */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .duplicate-badge {
            background-color: #e74c3c;
            color: white;
            border-radius: 10px;
            padding: 1px 6px;
            font-size: 11px;
            font-weight: 500;
            margin-left: 8px;
            vertical-align: middle;
            line-height: 1.2;
        }

        .shelved-badge {
            background-color: #d1d5db; /* A neutral grey */
            color: #4b5563;
            border-radius: 4px;
            padding: 2px 5px;
            font-size: 11px;
            font-weight: 600;
            margin-left: auto; /* Pushes it to the right */
            margin-right: 8px;
        }

        .shelved-badge.new {
            background-color: #e0e0e0;
            color: #757575;
        }

        .shelved-badge.old {
            background-color: #dbeafe; /* A light blue */
            color: #1e40af;
        }

        #search-box:focus {
            outline: none; /* Remove default focus ring */
            border-color: #8ab4f8; /* Google's blue for focus */
            box-shadow: 0 0 0 1px #8ab4f8; /* A subtle glow to match */
        }

        #search-box::placeholder {
            color: #bbb; /* Lighter placeholder text */
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        #add-window-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #ddd;
            background-color: #f8f9fa;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            color: #5f6368;
            margin-left: 10px;
            padding: 0;
            line-height: 26px;
            text-align: center;
        }

        #add-window-btn:hover {
            background-color: #f1f3f4;
            border-color: #c6c6c6;
        }

        .window-container {
            position: relative; /* Needed for the decorative ribbon */
            width: 350px;
            flex-shrink: 0;
            margin-right: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            height: 100%;
            background-color: #fff; /* Add a background */
            overflow: hidden; /* Hide anything that goes outside the border-radius */
        }

        .window-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px; /* Thickness of the ribbon */
            background: linear-gradient(135deg, #c0392b, #e74c3c); /* Festive red gradient */
            z-index: 10; /* Ensure it's above the header but below other popups */
        }

        .window-header {
            padding: 6px 10px;
            font-size: 12px;
            font-weight: 600;
            background-color: #f1f3f4;
            border-bottom: 1px solid #e0e0e0;
            color: #5f6368;
            border-top-left-radius: 8px; /* Match container radius */
            border-top-right-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-window-btn {
            border: none;
            background-color: transparent;
            cursor: pointer;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: #5f6368;
            padding: 0;
            margin: 0;
        }

        .close-window-btn:hover {
            background-color: #e8eaed;
        }

        .window-header.current-window {
            background-color: #e8f0fe;
            color: #1967d2;
        }

        .tab-list {
            overflow-y: auto;
            flex-grow: 1; /* Take remaining space */
        }

        .tab-item.dragging {
            opacity: 0.5;
        }

        .tab-list.drag-over {
            background-color: #e8f0fe; /* Light blue to indicate drop target */
        }

        .tab-item {
            display: flex;
            align-items: center;
            padding: 8px 10px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
        }
        .tab-item:hover {
            background-color: #f1f3f4;
        }
        .favicon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
        }
        .title {
            flex-grow: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 13px;
        }
        .close-btn, .pin-btn {
            border: none;
            background: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 4px;
        }
        .close-btn:hover, .pin-btn:hover {
            background-color: #e8eaed;
        }
        .close-btn {
            font-size: 18px;
            color: #5f6368;
        }
        .pin-btn {
            /* Using SVG for the pin action button (unpinned state) */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='18px' viewBox='0 0 24 24' width='18px' fill='%235f6368'%3E%3Cpath d='M0 0h24v24H0V0z' fill='none'/%3E%3Cpath d='M14 4v5l-2 2-2-2V4H8v5l-2 2v2h5.2v7h1.6v-7H18v-2l-2-2V4h-2zm-2 5.5l.5.5.5-.5V4h-1v5.5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
        }
        .tab-item.pinned .pin-btn {
            /* When tab is pinned, show the filled pin icon */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='18px' viewBox='0 0 24 24' width='18px' fill='%231a73e8'%3E%3Cpath d='M0 0h24v24H0V0z' fill='none'/%3E%3Cpath d='M16 9V4h1V2H7v2h1v5l-2 2v2h5.2v7h1.6v-7H18v-2l-2-2z'/%3E%3C/svg%3E");
        }
        #footer {
            padding: 10px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px; /* Add space between buttons */
        }
        #close-all-btn {
            flex-grow: 1; /* Allow this button to take more space */
            padding: 8px;
            border: 1px solid #dadce0;
            background-color: #f8f9fa;
            color: #3c4043;
            font-weight: 500;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }
        #close-all-btn:hover {
            background-color: #f1f3f4;
            border-color: #c6c6c6;
        }
        #preview-box {
            display: none; /* Initially hidden */
            position: fixed;
            top: 10px;
            left: 370px; /* Position it to the right of the popup */
            width: 480px;
            height: 270px;
            border: 1px solid #ccc;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }
        #preview-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        #custom-tooltip {
            position: absolute;
            display: none;
            background-color: #2c3e50;
            color: white;
            padding: 6px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s ease-out;
            white-space: nowrap;
        }